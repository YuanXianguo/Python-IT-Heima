<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>省市县选择案例</title>
    <script src="/static/js/jquery-3.3.1.js"></script>
    <script>
        $(function () {
            // 发起一个ajax请求 /prov，获取所有省级地区的信息
            // 获取信息，使用get
            // 涉及到信息修改，使用post
            $.get('/prov', function (data) {
                // 回调函数
                res = data.data;
                // 获取prov下拉列表框
                prov = $('#prov');
                for(i=0;i<res.length;i++){
                    id = res[i][0];
                    title = res[i][1];

                    // 向下拉列表追击元素
                    option_str = "<option value='" + id + "'>" + title + "</option>"
                    prov.append(option_str)
                }
            })

            // 绑定prov下拉列表的change事件，获取省下面的市的信息
            $('#prov').change(function () {
                prov_id = $(this).val();
                $.get('/city' + prov_id, function (data) {
                    res = data.data;
                    city = $('#city');
                    // 清空city下拉列表
                    city.empty().append('<option value="">---请选择市---</option>');
                    dis = $('#dis');
                    // 清空dis下拉列表
                    dis.empty().append('<option value="">---请选择县---</option>');
                    $.each(res, function (index, item) {
                        id = item[0];
                        title = item[1];
                        option_str = "<option value='" + id + "'>" + title + "</option>";
                        city.append(option_str);
                    })
                })
            })

            // 绑定city下拉列表的change事件，获取市下面的市的信息
            $('#city').change(function () {
                city_id = $(this).val();
                $.get('/dis' + city_id, function (data) {
                    res = data.data;
                    dis = $('#dis');
                    // 清空dis下拉列表
                    dis.empty().append('<option value="">---请选择县---</option>');
                    $.each(res, function (index, item) {
                        id = item[0];
                        title = item[1];
                        option_str = "<option value='" + id + "'>" + title + "</option>";
                        dis.append(option_str);
                    })
                })
            })
        })
    </script>
</head>
<body>
<select name="" id="prov">
    <option value="">---请选择省---</option>
</select>
<select name="" id="city">
    <option value="">---请选择市---</option>
</select>
<select name="" id="dis">
    <option value="">---请选择县---</option>
</select>
</body>
</html>
